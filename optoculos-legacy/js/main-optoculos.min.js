
var fns = {
    lightboxOverlay: $('<div class="lightboxOverlay"></div>'),
    lightboxBlock: $('<div class="lightboxOverlayInner"></div><div class="lightboxBlock"><a href="#" class="lightboxClose"></a><div class="lightboxInner"></div></div>'),
    lightbox: function (content, width, height) {
        $(content).appendTo(".lightboxInner");
        var pageHeight = $(window).height(),
            pageWidth = $(window).width(),
            contentWidth = width,
            contentHeight = height,
            maxWidthContent = .8 * pageWidth,
            maxHeightContent = .8 * pageHeight;
        if (contentWidth > maxWidthContent);
        else;
        if (contentHeight > maxHeightContent);
        else;
        $(".lightboxOverlay").css({
            position: "fixed",
            top: "0",
            left: "0",
            "background-color": "rgba(0,0,0,0.5)",
            height: "100%",
            width: "100%",
            "z-index": "5005"
        }), $(".lightboxOverlay").addClass("open"), $(".lightboxClose").click(function () {
            $(".lightboxOverlay").removeClass("open"), $(".lightboxInner").empty()
        }), $(".lightboxOverlayInner").click(function () {
            $(".lightboxOverlay").removeClass("open"), $(".lightboxInner").empty()
        })
    },
    tabs: function () {
        $(".tabNav").on("click", ".tabLink", function () {
            var ref = $(this).attr("data-ref");
            $(".tabLink, .tabContent").removeClass("active"), $(this).addClass("active"), $(".tabsItems").find("." + ref).addClass("active")
        })
    },
    isMobile: function () {
        var userAgent = navigator.userAgent.toLowerCase();
        if (userAgent.search(/(android|avantgo|blackberry|iemobile|nokia|lumia|bolt|boost|cricket|docomo|fone|hiptop|mini|mobi|palm|phone|pie|tablet|up\.browser|up\.link|webos|wos)/i) != -1) return !0
    },
    shareWindow: function (urlProduct, urlMediaProduct) {
        var facebook = "https://www.facebook.com/sharer/sharer.php?u=" + urlProduct,
            twitter = "https://twitter.com/home?status=" + urlProduct,
            pinterest = "https://pinterest.com/pin/create/button/?url=" + urlProduct + "&media=" + urlMediaProduct,
            gplus = "https://plus.google.com/share?url=" + urlProduct;
        $(".shareProduct .facebook").attr("href", facebook), $(".shareProduct .twitter").attr("href", twitter), $(".shareProduct .pinterest").attr("href", pinterest), $(".shareProduct .gplus").attr("href", gplus), $(".shareProduct a").on("click", function () {
            return newwindow = window.open($(this).attr("href"), "", "height=400,width=400"), window.focus && newwindow.focus(), !1
        })
    },
    imageFull: function ($element) {
        $element.each(function () {
            var bImg = $(this).find("img").attr("src");
            $(this).find("a").attr("style", "background-image:url(" + bImg + ");background-repeat: no-repeat; background-position: center; background-size: contain"), $(this).find("img").remove()
        })
    },
    verifyWidth: function () {
        return $(window).width() <= 1024 ? ($("body").addClass("isMobile"), $("body").removeClass("notMobile"), !0) : ($("body").removeClass("isMobile"), $("body").addClass("notMobile"), !1)
    },
    wrapText: function (string, strLength, complement) {
        return string.substring().length > strLength ? string.substring(0, strLength) + complement : string
    }
},
    global = {
        init: function () {
            global.selectToggle(), global.floatHeader(), global.menu(), global.menuOver(), global.menuToggle(), global.toggleSearch(), global.footerMenuToggle(), global.flagDiscount(), global.newsletterRegister(), global.returnToTop(), global.fixShelfHover(), $(document).ajaxStop(function () {
                global.autocompleteClone()
            })
        },
        fixShelfHover: function () {
            $(".productList li").each(function (n) {
                0 == $(this).find(".productImage .secondImage img").length ? $(this).find(".productImage .firstImage").css("opacity", "1") : "", console.log("second image")
            })
        },
        selectToggle: function () {
            $(".dropdown .select").on("click", function (e) {
                e.preventDefault(), $(this).parent().hasClass("active") ? $(this).parent().removeClass("active") : $(this).parent().addClass("active")
            }), $(document).mouseup(function (e) {
                $(".dropdown").each(function () {
                    if ($(this).parent().addClass("active")) {
                        var container = $(this);
                        container.is(e.target) || 0 !== container.has(e.target).length || container.removeClass("active")
                    }
                })
            })
        },
        floatHeader: function () {
            $(window).bind("scroll", function () {
                $(this).scrollTop() > 200 ? $("body").addClass("floatElement") : $("body").removeClass("floatElement"), $(this).scrollTop() > 250 ? ($(".pageHeader").addClass("floatHeader"), $(".navBar").addClass("floatNavBar")) : ($(".pageHeader").removeClass("floatHeader"), $(".navBar").removeClass("floatNavBar"))
            })
        },
        userLogged: function () {
            vtexjs.checkout.getOrderForm().done(function (data) {
                var userName;
                data.loggedIn && (userName = null != data.clientProfileData.firstName ? data.clientProfileData.firstName : data.clientProfileData.email, $(".enterAccount > a").text("Minha conta"), $(".hideContent .welcomeMsg").addClass("userLogged").html('<a href="/no-cache/user/logout">Sair</a>'), $(".navHead .welcomeMsg").addClass("userLogged").html("<span>Olá " + userName + '</span><a href="/no-cache/user/logout">Sair</a>'), $(".navHead .accountMobileNav").addClass("userLogged"))
            })
        },
        menu: function () { },
        menuOver: function () {
            function hideMenuSubItems(o) {
                o.stop(!0, !0).fadeOut(300)
            }
            var menuOutObject, menuOutTimer;
            $(".pageNav .menu-departamento h3.hasSubmenu").hover(function () {
                fns.verifyWidth() || (menuOutObject = $(this).next(".submenu"), menuOutObject.is(":visible") || hideMenuSubItems($(".pageNav .menu-departamento .submenu:visible")), clearTimeout(menuOutTimer), menuOutObject.fadeIn(300), $(".navOverlay").addClass("active").fadeIn(300), $(".modalSearch .closeModal").trigger("click"))
            }, function () {
                menuOutTimer = setTimeout(function () {
                    fns.verifyWidth() || (hideMenuSubItems(menuOutObject), $(".navOverlay").removeClass("active").fadeOut(300))
                }, 10)
            }), $(".pageNav .menu-departamento .submenu").hover(function () {
                fns.verifyWidth() || (menuOutObject = $(this), clearTimeout(menuOutTimer))
            }, function () {
                menuOutTimer = setTimeout(function () {
                    fns.verifyWidth() || (hideMenuSubItems(menuOutObject), $(".navOverlay").removeClass("active").fadeOut(300))
                }, 10)
            }), fns.verifyWidth() || ($(".pageNav .menu-departamento .submenu").mouseover(function () {
                $(this).find("h3").addClass("active")
            }), $(".pageNav .menu-departamento .submenu").mouseout(function () {
                $(this).find("h3").removeClass("active")
            }))
        },
        menuToggle: function () {
            $(".menu-mobile-toggle").on("click", function (e) {
                fns.verifyWidth() && (e.preventDefault(), $(".pageNav").addClass("open"), $("body").addClass("menuOpen"), "none" == $(".navOverlay").css("display") && $(".navOverlay").fadeIn(300))
            }), $(".navHead .ico-close, .navOverlay").on("click", function (e) {
                fns.verifyWidth() && (e.preventDefault(), $(".pageNav").removeClass("open"), $("body").removeClass("menuOpen"), "block" == $(".navOverlay").css("display") && $(".navOverlay").fadeOut(300))
            }), $(".menu-departamento h3 a i").on("click", function (e) {
                if (fns.verifyWidth()) {
                    $(this).parent().parent().hasClass("hasSubmenu") && e.preventDefault();
                    var that = $(this),
                        depLink = that.parent().parent(),
                        submenu = depLink.next();
                    submenu.hasClass("submenuOpen") ? (that.removeClass("active"), depLink.removeClass("active"), submenu.removeClass("submenuOpen").stop(!0, !0).slideUp(300)) : ($(".submenu").removeClass("submenuOpen").stop(!0, !0).slideUp(300), $(".menu-departamento .ico-expand").removeClass("active"), $(".menu-departamento h3").removeClass("active"), that.addClass("active"), depLink.addClass("active"), submenu.addClass("submenuOpen").stop(!0, !0).slideDown(300))
                }
            })
        },
        toggleSearch: function () {
            $(".toggleSearch").on("click", function (e) {
                e.preventDefault(), $(".toggleSearch, .modalSearch").toggleClass("active"), $("body").toggleClass("hidden"), $(".modalSearch").stop(!0, !0).fadeToggle(400)
            }), $(".modalSearch .closeModal").on("click", function (e) {
                e.preventDefault(), $(".toggleSearch, .modalSearch").removeClass("active"), $("body").removeClass("hidden"), $(".modalSearch").stop(!0, !0).fadeOut(400)
            })
        },
        footerMenuToggle: function () {
            $("footer .toggle h3").on("click", function (e) {
                e.preventDefault();
                var that = $(this),
                    itemContent = that.parent().find(".itemContent");
                $(window).width() <= 720 && (itemContent.hasClass("active") ? (that.removeClass("active"), itemContent.stop(!0, !0).hide(300).removeClass("active")) : ($("footer .toggle h3").parent().find(".itemContent").stop(!0, !0).hide(300).removeClass("active"), itemContent.addClass("active").stop(!0, !0).show(300), $("footer .toggle h3").removeClass("active"), that.addClass("active")))
            })
        },
        autocompleteClone: function () {
            $(".ui-autocomplete").appendTo(".searchBox"), $(".ui-autocomplete li").each(function () {
                if ($(this).find("img").length > 0) {
                    $(this).find("a").wrapInner("<span/>"), $(this).find("a").prepend($(this).find("img")), $(this).addClass("hasImage");
                    var imgSrc = $(this).find("img").attr("src").replace("25-25", "265-265");
                    $(this).find("img").attr("src", imgSrc).prop("width", "265").prop("height", "265")
                }
            }), $(".ui-autocomplete").append('<button onclick="global.searchTerm()" class="searchTerm">Ver todos os resultados</button>'), $(".hasImage").wrapAll('<ul class="product-found"></ul>')
        },
        searchTerm: function () {
            $(".ui-autocomplete").off(), window.location = "/" + $(".fulltext-search-box").val()
        },
        flagDiscount: function () {
            $(".productList .flagDiscount").each(function () {
                var descpct = $(this).text().replace(",", ".");
                descpct = descpct.replace(" %", ""), descpct = parseFloat(descpct), descpct = descpct.toFixed(0), "0" == descpct || 0 == descpct ? $(this).hide() : ($(this).show().addClass("active"), $(this).html("<span><strong>" + descpct + "% </strong>off</span>"))
            })
        },
        newsletterRegister: function () {
            // const masterDataUrl = "/api/dataentities",
                $newsModal = $("#news-modal"),
                $modalContent = $newsModal.find(".news-modal-content"),
                // findUser = function (email) {
                //     return $.ajax({
                //         headers: {
                //             Accept: "application/vnd.vtex.ds.v10+json",
                //             "Content-Type": "application/json",
                //             "REST-Range": "resources=0-1"
                //         },
                //         type: "GET",
                //         url: masterDataUrl + "/NR/search?_fields=id,email&_where=email=" + email
                //     })
                // },
                // cadNews = function (data) {
                //     return $.ajax({
                //         url: "/api/dataentities/NR/documents/",
                //         dataType: "json",
                //         type: "PATCH",
                //         crossDomain: !0,
                //         data: JSON.stringify(data),
                //         headers: {
                //             Accept: "application/vnd.vtex.ds.v10+json",
                //             "Content-Type": "application/json; charset=utf-8"
                //         }
                //     })
                // },
                // validateEmail = function (email) {
                //     var re = /^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;
                //     return re.test(email)
                // },
                centerModal = function () {
                    const left = $(window).width() / 2 - $modalContent.outerWidth() / 2,
                        top = $(window).height() / 2 - $modalContent.outerHeight() / 2;
                    $modalContent.css({
                        left: left,
                        top: top
                    })
                };
            if (!sessionStorage.getItem("showNews") && ($newsModal.show(), centerModal(), $newsModal.find(".news-modal-overlay,.news-modal-close,.btn-news-sucess").on("click", function () {
                $newsModal.hide(), sessionStorage.setItem("showNews", "true")
            // }), $newsModal.find(".send button").on("click", function (e) {
            //     e.preventDefault();
            //     var _that = $(this),
            //         parent = _that.parents("#form-modal-news");
            //     const name = $newsModal.find('[name="name"]').val(),
            //         email = $newsModal.find('[name="email"]').val();
            //     var jsonData = {};
            //     if (parent.find("input").each(function () {
            //         var id, val;
            //         "radio" == $(this).attr("type") ? $(this).is(":checked") && (id = $(this).attr("name"), val = $(this).val()) : (id = $(this).attr("name"), val = $(this).val()), void 0 != id && (jsonData[id] = val)
            //     }), name.length > 0)
            //         if (validateEmail(email)) {
            //             const reqFindUser = findUser(email);
            //             reqFindUser.done(function (clientInfo) {
            //                 if (0 == clientInfo.length) {
            //                     const reqCad = cadNews(jsonData);
            //                     $newsModal.find("input").attr("readonly", "true"), reqCad.done(function (email) {
            //                         $newsModal.find("input").val("").attr("readonly", !1), sessionStorage.setItem("showNews", "true"), $newsModal.find(".form-modal-news").css("display", "none"), $newsModal.find(".news-modal-sucess").css("display", "flex")
            //                     })
            //                 } else alert("Este e-mail já está cadastrado.")
            //             })
            //         } else alert("E-mail inválido");
            //     else alert("Digite um nome.")
            }), fns.verifyWidth())) {
                var _originalSize = $(window).width() + $(window).height();
                $(window).resize(function () {
                    $(window).width() + $(window).height() != _originalSize ? $modalContent.css({
                        top: "initial",
                        bottom: "10px"
                    }) : (setTimeout(function () {
                        centerModal()
                    }, 300), $modalContent.css({
                        bottom: "initial"
                    }), $newsModal.removeClass("focus"), $newsModal.find("input").blur())
                }), $newsModal.find("input").on("focus", function () {
                    $newsModal.addClass("focus"), "iphone" == navigator.platform.toLowerCase() && $modalContent.css({
                        top: "initial",
                        bottom: "10px"
                    })
                }), $newsModal.find("input").on("blur", function () {
                    $newsModal.removeClass("focus"), "iphone" == navigator.platform.toLowerCase() && (setTimeout(function () {
                        centerModal()
                    }, 300), $modalContent.css({
                        bottom: "initial"
                    }))
                })
            }
            // $(".newsletter button").on("click", function (e) {
            //     function validateEmail(email) {
            //         var re = /^[-a-z0-9~!$%^&*_=+}{\'?]+(\.[-a-z0-9~!$%^&*_=+}{\'?]+)*@([a-z0-9_][-a-z0-9_]*(\.[-a-z0-9_]+)*\.(aero|arpa|biz|com|coop|edu|gov|info|int|mil|museum|name|net|org|pro|travel|mobi|[a-z][a-z])|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,5})?$/i;
            //         return re.test(email)
            //     }
            //     e.preventDefault();
            //     var cupon, _that = $(this),
            //         parent = _that.parents("fieldset"),
            //         nameUser = parent.find("#ClientName").val(),
            //         emailUser = parent.find("#ClientEmail").val();
            //     cupon = "<strong>Seu cadastro foi realizado com sucesso!</strong> Para usar seu desconto, aplique o cupom <strong>OPTCUPOM10</strong> na finalização de compra.*Desconto válido apenas na primeira compra e uma vez por CPF.";
            //     var jsonData = {};
            //     parent.find("input").each(function () {
            //         var id, val;
            //         "radio" == $(this).attr("type") ? $(this).is(":checked") && (id = $(this).attr("name"), val = $(this).val()) : (id = $(this).attr("name"), val = $(this).val()), void 0 != id && (jsonData[id] = val)
            //     }), nameUser.length > 0 && void 0 != jsonData.gender && validateEmail(emailUser) ? (_that.text("Aguarde..."), parent.find("input").attr("readonly", !0), vtexjs.checkout.getOrderForm().then(function (orderForm) {
            //         $.ajax({
            //             headers: {
            //                 Accept: "application/vnd.vtex.ds.v10+json",
            //                 "Content-Type": "application/json",
            //                 "REST-Range": "resources=0-1"
            //             },
            //             type: "GET",
            //             url: "/api/dataentities/NR/search?_fields=id,email&_where=email=" + emailUser
            //         }).done(function (clientInfo) {
            //             0 == clientInfo.length ? $.ajax({
            //                 url: "/api/dataentities/NR/documents/",
            //                 dataType: "json",
            //                 type: "PATCH",
            //                 crossDomain: !0,
            //                 data: JSON.stringify(jsonData),
            //                 headers: {
            //                     Accept: "application/vnd.vtex.ds.v10+json",
            //                     "Content-Type": "application/json; charset=utf-8"
            //                 },
            //                 success: function (emailUser) {
            //                     $(parent).find(".campos").hide(), $(parent).find(".success").html(cupon), $(parent).find(".success").show(), _that.text("cadastrar"), parent.find("input").val("").attr("readonly", !1)
            //                 }
            //             }) : ($(parent).find(".duplicate").show(), $(parent).find(".campos").hide())
            //         })
            //     })) : ($(parent).find(".server").show(), $(parent).find(".campos").hide())
            // }), $(".tryAgain").on("click", function (e) {
            //     e.preventDefault();
            //     var parent = $(this).parents("fieldset");
            //     $(parent).find(".erro").hide(), $(parent).find(".campos").show()
            // })
        },
        returnToTop: function () {
            var elem = $("body").find("#returnTop"),
                windowH = $(window).height();
            $(document).height(), $("footer").height();
            $("body").hasClass("notMobile") ? elem.remove() : ($(window).bind("resize", function () {
                windowH = $(window).height()
            }), $(window).bind("scroll", function () {
                $(window).scrollTop() > windowH ? elem.show() : elem.hide()
            }), elem.bind("click", function () {
                return $("body, html").animate({
                    scrollTop: 0
                }, "slow"), !1
            }))
        }
    },
    slider = {
        fullSlider: function (element, dots, arrows, backgroundImage) {
            backgroundImage && (fns.imageFull(element.find(".box-banner")), element.addClass("bgImage")), element.slick({
                dots: dots,
                arrows: arrows,
                pauseOnHover: !1,
                autoplay: !0,
                fade: !0,
                autoplaySpeed: 8e3
            })
        },
        bannerSlide: function (element, dots, arrows, slidesToShow, slidesToShowDesktop, slidesToShowTablet, slidesToShowMobile, centerMode) {
            element.slick({
                dots: dots,
                arrows: arrows,
                autoplay: !1,
                pauseOnHover: !1,
                autoplaySpeed: 4e3,
                slidesToShow: slidesToShow,
                slidesToScroll: slidesToShow,
                dragable: !0,
                centerMode: centerMode,
                responsive: [{
                    breakpoint: 1280,
                    settings: {
                        autoplay: !0,
                        slidesToShow: slidesToShowDesktop,
                        slidesToScroll: slidesToShowDesktop
                    }
                }, {
                    breakpoint: 1024,
                    settings: {
                        autoplay: !0,
                        slidesToShow: slidesToShowTablet,
                        slidesToScroll: slidesToShowTablet
                    }
                }, {
                    breakpoint: 720,
                    settings: {
                        autoplay: !0,
                        slidesToShow: slidesToShowMobile,
                        slidesToScroll: slidesToShowMobile,
                        centerMode: !1
                    }
                }]
            })
        },
        shelfSlider: function (element, dots, arrows, autoplay, slidesToShow, slidesToShowDesktop, slidesToShowTablet, slidesToShowMobile, centerMode) {
            element.find("fieldset").remove(), element.slick({
                dots: dots,
                arrows: arrows,
                autoplay: autoplay,
                pauseOnHover: !1,
                autoplaySpeed: 4e3,
                slidesToShow: slidesToShow,
                slidesToScroll: slidesToShow,
                dragable: !0,
                centerMode: centerMode,
                responsive: [{
                    breakpoint: 1280,
                    settings: {
                        autoplay: !0,
                        slidesToShow: slidesToShowDesktop,
                        slidesToScroll: slidesToShowDesktop
                    }
                }, {
                    breakpoint: 1024,
                    settings: {
                        autoplay: !0,
                        slidesToShow: slidesToShowTablet,
                        slidesToScroll: slidesToShowTablet
                    }
                }, {
                    breakpoint: 720,
                    settings: {
                        autoplay: !0,
                        slidesToShow: slidesToShowMobile,
                        slidesToScroll: slidesToShowMobile,
                        centerMode: !1
                    }
                }, {
                    breakpoint: 480,
                    settings: {
                        autoplay: !0,
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        centerMode: !1
                    }
                }]
            })
        }
    },
    home = {
        init: function () {
            home.instafeed("optoculos")
        },
        instafeed: function (accountName) {
            new InstagramFeed({
                username: accountName,
                get_data: !0,
                callback: function (data) {
                    for (console.log(data), i = 0; i < 5; i++) {
                        var imageData = data.edge_owner_to_timeline_media.edges[i].node,
                            imageUrl = imageData.thumbnail_resources[3].src,
                            linkImg = "https://www.instagram.com/p/" + imageData.shortcode,
                            //titleImg = imageData.edge_media_to_caption.edges[0].node.text,
                            titleImg = (imageData.edge_media_to_caption.edges.length > 0 ? (imageData.edge_media_to_caption.edges[0].node.text) : 'OPT Óculos'),
                            item = '<div class="instaItem" style="background-image: url(' + imageUrl + ')"><a href="' + linkImg + '" target="_blank" title="' + titleImg + '"></a></div>';
                        $("#instagram").append(item)
                    }
                    $(".instaFeed").show()
                }
            })
        }
    },
    catalog = {
        init: function () {
            catalog.smartResearch(), $("body").hasClass("searchResult") ? (catalog.groupFiltersCategories(), catalog.identifySearchPage()) : (catalog.groupFilters(), catalog.filterChoosed()), catalog.orderBy(), catalog.groupFiltersToggle(), catalog.menuFilterToggle(), catalog.switchView(), $(".navBar").css("display", "flex"), $(".isMobile .navTopbar .filterOptions").prepend($(".catalog-options")), $(".isMobile .navTopbar .catalog-options").css("display", "block"), $("#mainContent").prepend($("#pageContent_title")), $("#pageContent_title").css("display", "none"), $("body.department.isMobile #pageContent_title").css("display", "block")
        },
        smartResearch: function () {
            $(".vitrine.resultItemsWrapper").offset();
            $(".navTopbar .filterOptions input[type='checkbox']").vtexSmartResearch({
                ajaxCallback: function () {
                    $("li.helperComplement").remove(), global.flagDiscount(), global.fixShelfHover()
                },
                shelfCallback: function () {
                    $("li.helperComplement").remove(), global.flagDiscount(), global.fixShelfHover()
                },
                filterScrollTop: function (resultItemsWrapperOffset) { }
            })
        },
        filterChoosed: function () {
            function click(classElement) {
                $(".filter").on("click", function () {
                    var classFilter = $(this).attr("class");
                    classFilter = classFilter.replace("filter ", ""), $(".refino label.sr_selected").each(function () {
                        $(this).hasClass(classFilter) && $(this).trigger("click")
                    })
                })
            }
            $('<div class="filterChoosed"><span class="btnClean">Limpar todos os Filtros</span></div>').insertBefore(".main"), $('<div class="filterChoosed"><a class="filter-close" >Aplicar <i class="ico-check"></i></a><a class="btnClean">Limpar <i class="ico-trash"></i></a></div>').insertAfter($(".filterOptions")), $(".refino label").unbind("click"), $(".refino input:checkbox").change(function () {
                var text = $(this).parent("label").text(),
                    className = $(this).parent("label").attr("class");
                if (className = className.replace(" sr_selected", ""), $(this).is(":checked")) {
                    var template = '<div class="filter ' + className + '" data-class="' + className + '"> ' + text + '<i class="ico-close"></i></div>';
                    $(template).insertBefore(".filterChoosed .filter-close"), click(className)
                } else $('.filterChoosed .filter[data-class="' + className + '"]').remove()
            }), $(".btnClean").on("click", function () {
                $(".refino label.sr_selected").each(function () {
                    $(this).trigger("click"), $(".filter").remove()
                })
            })
        },
        textItemDepartament: function (element) {
            for (var regexpItens = /\({1}([0-9])*?\){1}/g, i = 0; i < element.length; i++) {
                var newText = $(element[i]).text().replace(regexpItens, "");
                $(element[i]).text(newText)
            }
        },
        groupFilters: function () {
            catalog.textItemDepartament($(".navTopbar .filterOptions h4 a")), $(".navTopbar .search-single-navigator h4").next("ul").remove(), $(".navTopbar .search-single-navigator h4").wrapAll("<fieldset class='filterCategory'></fieldset>"), $(".filterCategory").prepend("<h5>" + $(".search-single-navigator").find("h3 a").text() + "</h5>"), $(".filterCategory h4").wrapAll("<div></div>"), $(".filterCategory").prependTo(".search-multiple-navigator")
        },
        groupFiltersCategories: function () {
            catalog.textItemDepartament($(".navTopbar .filterOptions h3 a")), $(".navTopbar .filterOptions .search-single-navigator h3").next("ul").remove(), $(".navTopbar .filterOptions .search-single-navigator h3").wrapAll("<fieldset class='filterCategory'></fieldset>"), $(".filterCategory").prepend("<h5>Categorias</h5>"), $(".filterCategory h3").wrapAll("<div></div>"), $(".filterCategory").prependTo(".search-multiple-navigator")
        },
        groupFiltersToggle: function () {
            $("fieldset > h5").on("click", function (e) {
                e.preventDefault(), $(this).parent().hasClass("active") ? fns.verifyWidth() ? ($(this).parent().removeClass("active"), $(this).parent().find("div").hide(300)) : ($(this).parent().removeClass("active"), $(this).parent().find("div").fadeOut(300)) : fns.verifyWidth() ? ($(this).parent().addClass("active"), $(this).parent().find("div").show(300)) : ($(this).parent().addClass("active"), $(this).parent().find("div").fadeIn(300))
            })
        },
        menuFilterToggle: function () {
            $(".filterMobileToggle").on("click", function (e) {
                fns.verifyWidth() && (e.preventDefault(), $(".navTopbar").addClass("open"), $("body").addClass("menuOpen"), $(".navOverlay").fadeIn(300))
            }), $(".navTopbarHead .ico-close, .navOverlay, .filter-close").on("click", function (e) {
                fns.verifyWidth() && (e.preventDefault(), $(".navTopbar").removeClass("open"), $("body").removeClass("menuOpen"), $(".navOverlay").fadeOut(300))
            })
        },
        orderBy: function () {
            var $orderBy = $(".orderby-lightbox-content-body"),
                linkFiltro = $orderBy.find("a");
            linkFiltro.bind("click touchable", function (event) {
                event.preventDefault();
                var newUrl, dataOrder = $(this).attr("data-order");
                if (window.location.href.indexOf("O=") > 0) {
                    var _thisOrder = window.location.search.split("O=")[1];
                    _thisOrder = _thisOrder.indexOf("&") ? _thisOrder.split("&")[0] : _thisOrder, newUrl = window.location.href.replace(_thisOrder, dataOrder)
                } else newUrl = window.location.href.indexOf("?") > 0 ? window.location.href + "&O=" + dataOrder : window.location.href + "?O=" + dataOrder;
                window.location.href = newUrl
            }), $(".orderby-toggle .toggle.order").on("click", function () {
                $(".orderby-toggle").stop(!0, !0).toggleClass("active"), $("body").stop(!0, !0).toggleClass("lightbox-open")
            });
            var urlFiltro = window.location.href,
                menorPreco = /(PriceASC)/g,
                maiorPreco = /(PriceDESC)/g,
                maisVendidos = /(TopSale)/g,
                melhorAvaliado = /(RateDESC)/g,
                deAZ = /(NameASC)/g,
                deZA = /(NameDESC)/g,
                ordemLancamento = /(Release)/g,
                melhorDesconto = /(BestDiscountDESC)/g;
            menorPreco.test(urlFiltro) ? ($orderBy.find(".menor-preco").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Menor preço")) : maiorPreco.test(urlFiltro) ? ($orderBy.find(".maior-preco").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Maior preço")) : maisVendidos.test(urlFiltro) ? ($orderBy.find(".mais-vendidos").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Mais vendidos")) : melhorAvaliado.test(urlFiltro) ? ($orderBy.find(".melhor-avaliado").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Melhores avaliações")) : deAZ.test(urlFiltro) ? ($orderBy.find(".de-az").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> A - Z")) : deZA.test(urlFiltro) ? ($orderBy.find(".de-za").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Z - A")) : ordemLancamento.test(urlFiltro) ? ($orderBy.find(".ordem-lancamento").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Data de lançamento")) : melhorDesconto.test(urlFiltro) ? ($orderBy.find(".melhor-desconto").toggleClass("active"), $(".orderby-toggle a span").html("<em>Ordenar por</em> Melhor desconto")) : $(".orderby-toggle a span").html("Ordenar por"), $orderBy.find(".orderByLink .active").length
        },
        switchView: function () {
            var $_shelf = $("[id^=ResultItems_]");
            fns.verifyWidth() ? $_shelf.attr("view-grid", "large") : $_shelf.attr("view-grid", "small"), $(".selectView .device span").on("click", function () {
                var _this = $(this),
                    layout = _this.attr("data-layout");
                $_shelf.attr("view-grid") != layout && ($_shelf.attr("view-grid", layout), $(".selectViewAction").each(function () {
                    $(this).removeClass("active"), $(this).attr("data-layout") == layout && $(this).addClass("active")
                }))
            })
        },
        identifySearchPage: function () {
            var url = window.location.pathname.split("/");
            catalog.searchResult(), 2 == url.length && ($("body").addClass("firstLevel"), catalog.searchBradCrumb())
        },
        searchResult: function () {
            var searchString = $(".searchResultsTime .resultado-busca-termo .value").eq(0).text(),
                numberResult = $(".searchResultsTime .resultado-busca-numero .value").eq(0).text();
            "1" == numberResult ? $(".searchDisplay").append('<p class="search-string">Você buscou por: <span>"' + searchString + '"</span></p><p class="number-result"> Encontramos <span>"' + numberResult + '"</span> resultado</p>') : $(".searchDisplay").append('<p class="search-string">Você buscou por: <span>"' + searchString + '"</span></p><p class="number-result"> Encontramos <span>"' + numberResult + '"</span> resultados</p>')
        },
        searchBradCrumb: function () {
            var searchString = $(".searchResultsTime .resultado-busca-termo .value").eq(0).text(),
                templateLink = $('<li class="last"><a href="/">' + searchString + "</a></li>");
            $(".bread-crumb ul").append(templateLink)
        },
        emptySearch: function () {
            var word = $('meta[name="Abstract"]').attr("content");
            $(".box-emptySearch p em").text(word)
        },
        buscaVazia: function () {
            var pagina_busca = $(".search-result"),
                busca_vazia = $(".busca-vazio");
            if (pagina_busca[0]) {
                var url = window.location.toString().split("/"),
                    split_ft = url[3].split("?");
                split_ft[0];
                if (busca_vazia[0]) pagina_busca.addClass("no-result"), $(".busca-vazio").append("<ul><li>Tente palavras menos específicas.</li><li>Digite pelo menos quatro caracteres no campo de busca.</li><li>Use os menus do site para navegar pelos departamentos de produtos</ul>"), $(".navSidebar").remove();
                else {
                    $(".resultado-busca-termo:eq(0)").find(".value").text();
                    pagina_busca.addClass("resultado-encontrado")
                }
            }
        },
        searchWord: function () {
            var word = $(".resultado-busca-termo:eq(0)").find("strong").text();
            $(".navTopbar .titulo-sessao").html('<em>Você buscou por:</em>"' + word + '"')
        }
    },
    product = {
        init: function () {
            var imageWidth = $("#include").width(),
                imageHeight = $("#include").height();
            product.superZoom(imageWidth, imageHeight), product.installmentToggle(), product.shippingBlock(), product.buyTogetherMobile(), product.productUnavailable(), product.comprarComLente()
        },
        productUnavailable: function () {
            $("#notifymeButtonOK").attr("value", "AVISE-ME"), skuJson.available || $("body").addClass("unavailable")
        },
        buyTogetherMobile: function () {
            $(window).width() <= 720 && ($(".productBuyTogether table").append('<tr class="line-2"></tr>'), $(".productBuyTogether table").append('<tr class="line-3"></tr>'), $(".productBuyTogether table tr.line-2").append($(".productBuyTogether table td.equal")), $(".productBuyTogether table tr.line-3").append($(".productBuyTogether table td.buy")), $(".productBuyTogether table td.equal").attr("colspan", "3"), $(".productBuyTogether table td.buy").attr("colspan", "3"))
        },
        superZoom: function (width, height) {
            window.LoadZoom = function (pi) {
                if ($(".image-zoom").length <= 0) return !1;
                var optionsZoom = {
                    zoomWidth: width,
                    zoomHeight: height,
                    preloadText: ""
                };
                $(".image-zoom").jqzoom(optionsZoom)
            }, LoadZoom(0)
        },
        thumbSlider: function () {
            var imageFormat = "-460-460";
            $("ul.thumbs li img").each(function () {
                var src = $(this).attr("src");
                src = src.replace("-55-55", imageFormat), $(this).attr("src", src)
            }), $("ul.thumbs").slick({
                infinite: !1,
                autoplay: !1,
                slidesToShow: 5,
                slidesToScroll: 1,
                speed: 500,
                dots: !1,
                arrows: !0,
                draggable: !1,
                vertical: !0,
                responsive: [{
                    breakpoint: 1025,
                    settings: {
                        slidesToShow: 3,
                        slidesToScroll: 1
                    }
                }, {
                    breakpoint: 720,
                    settings: {
                        draggable: !0,
                        slidesToShow: 1,
                        slidesToScroll: 1,
                        arrows: !1,
                        dots: !0,
                        vertical: !1
                    }
                }]
            }), $("ul.thumbs").slick("slickPrev")
        },
        installmentToggle: function () {
            $(".productPrice .skuBestInstallmentNumber").prepend("em até "), $(".other-payment-method-ul li").length > 1 && ($(".other-payment-method-ul").prepend("<h6>Cartão de crédito</h6>").prepend('<a href="#" class="close"><i class="ico-close"></i></a>'), $(".other-payment-method").prepend('<div class="installmentToggle"><span>Ver parcelas <i class="ico-expand"></i></span></div>'), $(".other-payment-method-ul li.Express-à").html(function () {
                return $(this).html().replace(/à vista(?=[^>]*<)/gi, "<span class='a-vista'>$&</span>")
            }), $(".other-payment-method-American").each(function () {
                $(this).find("span").html(function () {
                    return $(this).html().replace("de", "&nbsp;")
                })
            }), $(".other-payment-method-American").each(function () {
                $(this).find("strong").appendTo(this).find(".other-payment-method-intereset-no")
            }), $(".installmentToggle span").on("click", function (e) {
                e.preventDefault(), $(this).toggleClass("active"), $(this).find("i").toggleClass("active"), $(".other-payment-method-ul").stop(!0, !0).slideToggle()
            }), $(".other-payment-method-ul .close").on("click", function (e) {
                e.preventDefault(), $(".other-payment-method-ul").siblings("div.installmentToggle").find("span").toggleClass("active"), $(".other-payment-method-ul").siblings("div.installmentToggle").find("span i").toggleClass("active"), $(".other-payment-method-ul").stop(!0, !0).slideToggle()
            }))
        },
        shippingBlock: function () {
            ShippingValue(), setTimeout(function () {
                $(".freight-btn").on("click", function () {
                    $(document).ajaxStop(function () {
                        $(".close-shipping").remove(), $(".freight-values").prepend('<a href="#" class="close-shipping"><i class="ico-close"></i></a>'), $(".close-shipping").on("click", function (e) {
                            e.preventDefault(), $(".freight-values").hide()
                        })
                    })
                }), $("#calculoFrete h2").html("Calcule o frete"), $("#calculoFrete .freight-btn").val("Calcular"), $("#calculoFrete .freight-zip-box").attr("placeholder", "Digite seu CEP")
            }, 1e3)
        },
        comprarComLente: function () {
            "2" === vtxctx.categoryId && ($(".mainProductInfo .buyProduct").addClass("comprar-com-lente"), $(".buy-button").before($("<a>", {
                "class": "buy-button comprar-com-lente",
                href: location.pathname + "?lid=1b20dad8-0f46-424d-b72f-ab72d0827e06",
                text: "Comprar com grau"
            })))
        }
    },
    account = {
        buildModal: function () {
            function validateDate(value) {
                if (10 != value.length) return !1;
                var data = value,
                    dia = data.substr(0, 2),
                    barra1 = data.substr(2, 1),
                    mes = data.substr(3, 2),
                    barra2 = data.substr(5, 1),
                    ano = data.substr(6, 4);
                return !(10 != data.length || "/" != barra1 || "/" != barra2 || isNaN(dia) || isNaN(mes) || isNaN(ano) || dia > 31 || mes > 12) && ((4 != mes && 6 != mes && 9 != mes && 11 != mes || 31 != dia) && ((2 != mes || !(dia > 29 || 29 == dia && ano % 4 != 0)) && !(ano < 1900)))
            }
            $(".edit-profile-link").insertAfter($(".profile-detail-display-info")), $(".edit-address-link").each(function () {
                $(this).insertAfter($(this).next(".address-display-unit-info"))
            }), $("#editar-perfil").css("display", "none"), $("#address-edit").css("display", "none"), $("#address-remove").css("display", "none"), $("#edit-data-link").attr({
                rel: "modal:open"
            }), $(".address-update").attr({
                rel: "modal:open"
            }), $("#address-update").each(function () {
                $(this).attr({
                    rel: "modal:open"
                })
            }), $(".delete").each(function () {
                $(this).attr({
                    rel: "modal:open"
                })
            }), $(".modal-footer").each(function () {
                $(this).append('<a href="#close-modal" rel="modal:close" class="btn-link">Cancelar</a>')
            }), "" == $("input#birthDate").val() && $("#profile-submit").addClass("not-active"), $("input#birthDate").change(function () {
                0 == validateDate($("input#birthDate").val()) ? ($("label#error").html("*Formato inválido (Data de nascimento)"), $("label#error").show().css("visibility", "visible"), $("input#birthDate").focus().addClass("error"), $("#profile-submit").addClass("not-active")) : ($("input#birthDate").removeClass("error"), $("label#error").hide().css("visibility", "hidden"), $("#profile-submit").removeClass("not-active"))
            })
        },
        init: function () {
            account.buildModal()
        }
    },
    form_validate = {
        init: function () {
            this.mask(), this.validate()
        },
        send: function (enitdade) {
            var jsonData = {};
            $(".pageContent form input, .pageContent form select, .pageContent form textarea").each(function () {
                var id = $(this).attr("name"),
                    val = $(this).val();
                void 0 != id && (jsonData[id] = val)
            }), $.ajax({
                url: "/api/dataentities/" + enitdade + "/documents/",
                dataType: "json",
                type: "PATCH",
                crossDomain: !0,
                data: JSON.stringify(jsonData),
                headers: {
                    Accept: "application/vnd.vtex.ds.v10+json",
                    "Content-Type": "application/json; charset=utf-8"
                },
                beforeSend: function () {
                    $("button#submit").text("Aguarde"), $(".pageContent form input, .pageContent form select, .pageContent form textarea").attr("readonly", !0)
                },
                success: function (data) {
                    alert("Enviado com sucesso!"), $("button#submit").text("Enviar"),
                        $(".pageContent form input, .pageContent form select, .pageContent form textarea").val("").attr("readonly", !1), $(".pageContent form").addClass("hide").parent().append('<p class="success"><strong>Obrigado!</strong> Formulário enviado com sucesso!<br/> Em breve entraremos em contato!<p>'), setTimeout(function () {
                            $(".pageContent form").removeClass("hide").parent().find(".success").remove()
                        }, 5e3)
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    erro = JSON.parse(xhr.responseText), alert(erro.Message)
                }
            })
        },
        validate: function () {
            $("button#submit").click(function (e) {
                e.preventDefault();
                var enitdade = $(this).attr("data-entity"),
                    testEmail = /^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;
                $(".pageContent form input, .pageContent form select, .pageContent form textarea").each(function () {
                    $(this).attr("required") && ("" == $(this).val() ? $(this).addClass("error") : $(this).removeClass("error")), "checkbox" == $(this).attr("type") && ($(this).is(":checked") ? $(this).attr("value", "true") : $(this).attr("value", "false"))
                });
                var email = $("#email").val();
                testEmail.test(email) || ($("#email").addClass("error"), alert("Email Inválido!")), $(".error").length ? alert("Preencha todos os campos.") : form_validate.send(enitdade)
            })
        },
        mask: function () {
            var maskBehavior = function (val) {
                return 11 === val.replace(/\D/g, "").length ? "(00) 00000-0000" : "(00) 0000-00009"
            },
                options = {
                    onKeyPress: function (val, e, field, options) {
                        field.mask(maskBehavior.apply({}, arguments), options)
                    }
                };
            $("#data_de_nascimento").mask("00/00/0000"), $("#rendimento_mensal").mask("R$ ###.##0,00"), $("#telefone, #celular").mask(maskBehavior, options)
        }
    },
    stores = {
        init: function () {
            stores.mapModal()
        },
        mapModal: function () {
            $(".linkMap").on("click", function (e) {
                if (!fns.isMobile()) {
                    e.preventDefault();
                    var mapUrl = $(this).attr("data-modal"),
                        modalUrl = $("#modalLojas .mapa iframe").attr("src");
                    mapUrl != modalUrl && $("#modalLojas .mapa iframe").attr("src", mapUrl), $(this).parent(".box-click").parent(".item").parent(".stores").children("#modalLojas").fadeIn(), $("#modalLojas .overlay").fadeIn(), setTimeout(function () {
                        $("#modalLojas .mapa").fadeIn()
                    }, 250)
                }
            }), $("#modalLojas .closeModal, #modalLojas .overlay").on("click", function () {
                stores.closeModal()
            })
        },
        closeModal: function () {
            $("#modalLojas").fadeOut(), $("#modalLojas .overlay").fadeOut(), $("#modalLojas .mapa").fadeOut()
        }
    },
    institutional = {
        init: function () {
            institutional.linkSidebar(), institutional.toggleMenu(), $("body").hasClass("form") && form_validate.init(), $("body").hasClass("nossas-lojas") && stores.init()
        },
        linkSidebar: function () {
            $(".institutionalLinks li a").each(function () {
                var page = $(this).text(),
                    link = $(this).attr("href"),
                    url = window.location.pathname;
                link == url && ($("h3.selected span").text(page), $(this).addClass("current"))
            })
        },
        toggleMenu: function () {
            $(".institutionalLinks").addClass("active"), $("h3.selected").on("click", function () {
                $(this).toggleClass("active"), $(".institutionalLinks").stop(!0, !0).toggleClass("active")
            })
        }
    };
$(document).ready(function () {
    ! function (d) {
        if ("function" != typeof d.qdAjax) {
            var a = {};
            d.qdAjaxQueue = a, 150 > parseInt((d.fn.jquery.replace(/[^0-9]+/g, "") + "000").slice(0, 3), 10) && console && "function" == typeof console.error && console.error(), d.qdAjax = function (f) {
                try {
                    var e, b = d.extend({}, {
                        url: "",
                        type: "GET",
                        data: "",
                        success: function () { },
                        error: function () { },
                        complete: function () { },
                        clearQueueDelay: 5
                    }, f);
                    e = "object" == typeof b.data ? JSON.stringify(b.data) : b.data.toString();
                    var c = encodeURIComponent(b.url + "|" + b.type + "|" + e);
                    return a[c] = a[c] || {}, "undefined" == typeof a[c].jqXHR ? a[c].jqXHR = d.ajax(b) : (a[c].jqXHR.done(b.success), a[c].jqXHR.fail(b.error), a[c].jqXHR.always(b.complete)), a[c].jqXHR.always(function () {
                        isNaN(parseInt(b.clearQueueDelay)) || setTimeout(function () {
                            a[c].jqXHR = void 0
                        }, b.clearQueueDelay)
                    }), a[c].jqXHR
                } catch (g) {
                    "undefined" != typeof console && "function" == typeof console.error && console.error("Problemas no $.qdAjax :( . Detalhes: " + g.message)
                }
            }, d.qdAjax.version = "4.0"
        }
    }(jQuery), $(".helperComplement").remove(), global.init(), $(window).load(function () {
        slider.fullSlider($("#tvDesktop"), !0, !1, !0), slider.fullSlider($("#tvMobile"), !0, !1, !1), slider.shelfSlider($(".shelfCarousel ul"), !1, !0, !1, 4, 4, 3, 2, !1)
    }), $("body").hasClass("product") && (product.init(), setTimeout(function () {
        product.thumbSlider()
    }, 100), $(window).load(function () {
        slider.shelfSlider($(".shelfCarousel ul"), !1, !0, !1, 4, 4, 3, 2, !1)
    })), $("body").hasClass("catalog") && catalog.init(), $("body").hasClass("emptySearch") && (catalog.emptySearch(), $(window).load(function () {
        slider.shelfSlider($(".shelfCarousel ul"), !1, !0, !1, 4, 4, 3, 2, !1)
    })), $("body").hasClass("institutional") && institutional.init(), $("body").hasClass("account") && account.init()
}), $(window).load(function () {
    global.userLogged(), $(window).resize(function () {
        fns.verifyWidth()
    })
}), $(document).ajaxStop(function () {
    $(".helperComplement").remove()
});
$(document).ready(function () {
    $('.productInfo .installment').each(function () {
        var $this = $(this);
        if ($this.find('strong').length > 0) {
            $this.css("display", "block");
        } else {
            $this.css("display", "none");
        }
    });
});

$(document).ready(function () {
    $('.youtube').slick({
        slidesToShow: 3,
        slidesToScroll: 3,
        responsive: [
            {
                breakpoint: 768,
                settings: {
                    arrows: false,
                    slidesToShow: 3,
                    slidesToScroll: 3
                }
            },
            {
                breakpoint: 480,
                settings: {
                    arrows: false,
                    slidesToShow: 1,
                    slidesToScroll: 1
                }
            }
        ]
    });
});

$(document).ready(function () {
    $('.center').slick({
        centerMode: true,
        centerPadding: '10px',
        slidesToShow: 5,
        focusOnSelect: true,
        adaptiveHeight: true,
        prevArrow: '<img class="bt-prev" src="/arquivos/left-arrow.jpg">',
        nextArrow: '<img class="bt-next" src="/arquivos/right-arrow.jpg">',
        responsive: [
            {
                breakpoint: 768,
                settings: {
                    //arrows: false,
                    centerMode: true,
                    centerPadding: '40px',
                    slidesToShow: 3
                }
            },
            {
                breakpoint: 480,
                settings: {
                    //arrows: false,
                    centerMode: true,
                    centerPadding: '10px',
                    slidesToShow: 3
                }
            }
        ]
    });
});

$(document).ready(function () {
    $(".center, slick-arrow").on('mouseup swipe click', function () {
        if ($("#o-aviador").hasClass("slick-current")) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-aviador").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-wayfarer").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#quadrado").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-wayfarer").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-wayfarer").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#triangular").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-wayfarer").addClass('inative');
        }
        else if ($("#o-redondo").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#quadrado").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-redondo").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-redondo").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#triangular").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-redondo").addClass('inative');
        }
        else if ($("#o-gatinho").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#quadrado").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-gatinho").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-gatinho").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#triangular").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-gatinho").addClass('inative');
        }
        else if ($("#o-retangulo").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#quadrado").hasClass("slick-current") || $("#triangular").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-retangulo").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-retangulo").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-retangulo").addClass('inative');
        }
        else if ($("#o-quadrado").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#triangular").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-quadrado").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-quadrado").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#quadrado").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-quadrado").addClass('inative');
        }
        else if ($("#o-mascara").hasClass("slick-current")) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-mascara").addClass('ativo');
            $("#oculosGraulabel").hide();
        }
        else if ($("#o-borboleta").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#quadrado").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-borboleta").addClass('inative');
        }
        else if ($("#o-borboleta").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#triangular").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-borboleta").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-irregular").hasClass("slick-current") && ($("#longo").hasClass("slick-current") || $("#retangular").hasClass("slick-current") || $("#coracao").hasClass("slick-current") || $("#triangular").hasClass("slick-current") || $("#oval").hasClass("slick-current"))) {
            $(".positivo").show();
            $(".negativo").hide();
            $("#o-irregular").addClass('ativo');
            $("#oculosGraulabel").show();
        }
        else if ($("#o-irregular").hasClass("slick-current") && ($("#redondo").hasClass("slick-current") || $("#quadrado").hasClass("slick-current"))) {
            $(".positivo").hide();
            $(".negativo").show();
            $("#o-irregular").addClass('inative');
        }
    });
});
$(document).ready(function () {
    $(".center, slick-arrow").on('mouseup swipe click', function () {
        $(".luckyglass").hide();
        $("input[type='radio']:checked").attr('checked', false);
    });
});
$(document).ready(function () {
    $(".selecionar-radio").on('click', function () {
        if ($("#oculosSol").prop("checked") && $("#o-aviador").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Aviador?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-aviador").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Aviador?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-wayfarer").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Wayfarer?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-wayfarer").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Wayfarer?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-redondo").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Redondo?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-redondo").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Redondo?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-gatinho").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Gatinho?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-gatinho").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Gatinho?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-retangulo").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Retangular?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-retangulo").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Retangular?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-quadrado").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Quadrado?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-quadrado").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Quadrado?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-mascara").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Mascara?map=c,specificationFilter_150");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-borboleta").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Borboleta?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-borboleta").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Borboleta?map=c,specificationFilter_149");
        }
        else if ($("#oculosSol").prop("checked") && $("#o-irregular").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-sol/Esportivo?map=c,specificationFilter_150");
        }
        else if ($("#oculosGrau").prop("checked") && $("#o-irregular").hasClass("slick-current")) {
            $(".luckyglass").css("display", "inline-block");
            $(".luckyglass").attr("href", "https://www.optoculos.com.br/oculos-de-grau/Esportivo?map=c,specificationFilter_149");
        }
    });
});


$(document).ready(function () {
    $('.medidas-dnp .pageContent article a').click(function () {
        $('.medidas-dnp .popup').show();
        //$('.medidas-dnp .popup .popup-content').show();
    });

    $('.medidas-dnp .bt-fechar').click(function () {
        $('.medidas-dnp .popup').hide();
    });
    $('.medidas-dnp .stap-two').css('display', 'none');
    $('.medidas-dnp .popup-content .first-pop a img').click(function () {
        $('.medidas-dnp .stap-one').css('display', 'none');
        $('.medidas-dnp .stap-two').css('display', 'block');
    });

    $('.enviar').click(function () {

        var usuario = $('#usuario').val();
        var nome = $('#nome').val();
        var email = $('#email').val();
        var telefone = $('#telefone').val();
        var dados = { 'do': 'cadastro', 'usuario': usuario, 'nome': nome, 'email': email, 'telefone': telefone };
        $.post("https://sistemadnp.optoculos.com.br/ajax.php", dados, function (d) {
            if (d == '1') {
                $('.stap-two form').html('<div class="alert alert-success" role="alert">Cadastro feito com sucesso!</div>');
            }
        });
        return false;
    });

    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $img = $('<img/>').attr('src', e.target.result);
                $(input).after($img);
            }
            reader.readAsDataURL(input.files[0]);
        }
    }
    function verificaMostraBotao() {
        $('input[type=file]').each(function (index) {
            if ($('input[type=file]').eq(index).val() != "")
                $('.hide').hide();
        });
    }
    $('body').on("change", "input[type=file]", function () {
        verificaMostraBotao();
        readURL(this);
    });
});

// Trigger photo take
/*document.getElementById("abrircamera").addEventListener("click", function () {

});*/


$('#news-modal button').on('click', function () {
    var textBox = $('#codigoPop')
    textBox.select();
    document.execCommand("copy");
    $('<div id="news-modal-copiado">Copiado</div>').insertAfter('#codigoPop')
    console.log('copiou')
})


// CÓDIGO CBKYONNE 
window.onload = function () {
    const params = {
        apiKey: "3V6fcZUZTDOHjidhBevPYXnk3hTc4FFA4sJr654r",
        popupIntegration: {
            centeredHorizontal: true,
            centeredVertical: true,
            width: "780px",
            height: "560px"
        }
    };

    fitmixInstance = FitMix.createWidget("my-fitmix-container", params);
    console.log('carregou...')
};

const tipbarSlick = () => {
    $('.header-nav-top').slick({
        infinite: true,
        slidesToShow: 1,
        slidesToScroll: 1,
        arrows: false,
        autoplay: true,
        autoplaySpeed: 8000,
        dots: false,
        pauseOnHover: true
    });
}

const lgpd = () => {
    const getCookie = localStorage.getItem('lgpd')
    if (!getCookie) {
        $('.lgpd__modal').addClass('is-open')
    }

    $('body').on('click', '.lgpd__button', function () {
        localStorage.setItem('lgpd', 'open')
        $('.lgpd__modal').removeClass('is-open')
    })
}

const buttonCopy = () => {
    $('body').on('click', '#btn-copy-cupom', function () {
        $('#codigoPop').select();
        document.execCommand("copy");
        $('#btn-copy-cupom').text('CUPOM COPIADO')
    })
}

const headerSize = () => {
    if (!$('body').hasClass('isMobile')) return
    const paddingTop = $('header.pageHeader').height();
    $('body').css("padding-top", `${paddingTop}px`)
}

$(document).ready(function () {
    window.onload = function () {
        const params = {
            apiKey: "3V6fcZUZTDOHjidhBevPYXnk3hTc4FFA4sJr654r",
            popupIntegration: {
                centeredHorizontal: true,
                centeredVertical: true,
                width: "780px",
                height: "560px"
            }
        };

        fitmixInstance = FitMix.createWidget("my-fitmix-container", params);
        console.log('carregou...')
    };
    tipbarSlick();
    lgpd();
    buttonCopy();
    headerSize();

    setTimeout(function () {

        $('.topo-nav .wrapper').css({ 'visibility': 'visible' })

        $('#carosel-collection').slick({
            infinite: true,
            slidesToShow: 1,
            slidesToScroll: 1,
            arrows: false,
            autoplay: true,
            autoplaySpeed: 8000,
            dots: true,
            pauseOnHover: true
        });


        $('.featuredCollection.sidecarousel .shelf ul').slick({
            infinite: true,
            slidesToShow: 2,
            slidesToScroll: 2,
            autoplay: true,
            autoplaySpeed: 3000,
            dots: true
        });


        $('#triple-banner-carousel').slick({
            infinite: true,
            slidesToShow: 3,
            slidesToScroll: 1,
            autoplay: true,
            autoplaySpeed: 3000,
            arrows: false,
            responsive: [
                {
                    breakpoint: 768,
                    settings: {
                        slidesToShow: 2,
                        slidesToScroll: 2,
                        arrows: false
                    }
                }]

        });

    }, 1000)
});


//ABRIR SEARCH
$("#nav-busca").click(() => {
    $(".modalSearch").show();
    $(".fulltext-search-box.ui-autocomplete-input").focus();
    $(".fulltext-search-box.ui-autocomplete-input").select();

})

//ALERTA DE ESTOQUE

setTimeout(function () {
    try {
        if (skuJson.available == true && skuJson.skus[0].availablequantity <= 5) {

            if (skuJson.skus[0].availablequantity == 1) {
                $("body.product .mainProductInfo h6.productReference").after(`
                <span style="color: #9560A4;font-weight: 600;margin-top: 2em;
                display: block;">Resta somente ${skuJson.skus[0].availablequantity} unidade no estoque!</span>
                `)
            } else {
                $("body.product .mainProductInfo h6.productReference").after(`
                <span style="color: #9560A4;font-weight: 600;margin-top: 2em;
                display: block;">Restam somente ${skuJson.skus[0].availablequantity} unidades no estoque!</span>
                `)
            }

        }
    } catch (error) {
        console.log(error)
    }

}, 2000)

//SELO RAY-BAN
let marca = $("#brandname a").text();
if (marca == "Ray Ban") {
    $(".topImageproduct").append(`
            <img class="brand-badge" src="/arquivos/Rayban_Horizontal.png"/>`
    )
}

